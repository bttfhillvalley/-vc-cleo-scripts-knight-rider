{$CLEO .s}
{$INCLUDE Variables.txt}
{$INCLUDE ../Common/CleoConstants.txt}
0000:
const
KEY_Engine = 8 // backspace
end
int startup
int led
int MPH2
int TURNRAD
int RPM
int RPMDigit
int step12
int step24
int step49
int step10

0000:
while true 
    wait 10
    if
        not Player.Defined($PLAYER_CHAR)
    then
        continue
    end
    if
        80DD:   not actor $player_actor driving_vehicle_type 4823
    then
        continue
    end
    03C1: vehicle = player $PLAYER_CHAR car
    gosub @CheckKey
    gosub @CheckKey2
3F02: Engine_IO = car vehicle engine_status 
end

:CheckKey
if and
    is_key_pressed KEY_engine
    timera > 500
    
then
    timera = 0
       if
        engine_io == 1
        then
        startup = 1
        gosub @Engine_Off
    else
        startup = 0
        gosub @Engine_On
    end
    end
return

:CheckKey2
if and
00E1:   player 0 pressed_button 16 //Accelerate
Engine_IO == 0
    
then
    timera = 0
       if
        engine_io == 1
        then
        startup = 1
        gosub @Engine_Off
    else
        startup = 0
        gosub @Engine_On
    end
    end
return

:Engine_Off
//!!!temporary section Start!!!!
//RPM dots
for RPM = 1 to 29
3F19: set_car vehicle component "RPM" index RPM glow 0
end
for RPMDigit = 10 to 29
3F11: set_car vehicle component "digitalRPMdigit" index RPMDigit visible 0
3F19: set_car vehicle component "digitalRPMdigit" index RPMDigit glow 0 
end
//display zeros
3F10: set_car vehicle component "digitalRPMdigit10" visible 1 
3F10: set_car vehicle component "digitalRPMdigit20" visible 1 
//!!!temporary section End!!!!  

//Auto Cruise Off
3F18: set_car vehicle component "AutoCruise" glow 0
3F18: set_car vehicle component "AutoCruiseBTN" glow 0


//Normal Cruise Off
3F18: set_car vehicle component "NormalCruise" glow 0
3F18: set_car vehicle component "NormalCruiseBTN" glow 0

//Pursuit Mode Off  
3F18: set_car vehicle component "Pursuit" glow 0
3F18: set_car vehicle component "PursuitBTN" glow 0

//Top Center Lights Off
3F18: set_car vehicle component "Power" glow 0
3F18: set_car vehicle component "MinRPM" glow 0
3F18: set_car vehicle component "FuelOn" glow 0
3F18: set_car vehicle component "Ignitors" glow 0
3F12: set car vehicle component "Power" alpha 50
3F12: set car vehicle component "MinRPM" alpha 50
3F12: set car vehicle component "FuelOn" alpha 50
3F12: set car vehicle component "Ignitors" alpha 50

//Middle Center Lights Off
3F18: set_car vehicle component "PilotCenterLights" glow 0
3F12: set car vehicle component "PilotCenterLights" alpha 50
3F18: set_car vehicle component "S1Voice" glow 0
3F12: set car vehicle component "S1Voice" alpha 50

//Accessory Lights Off
3F18: set_car vehicle component "AccessoryLights" glow 0
3F12: set car vehicle component "AccessoryLights" alpha 150

//right led bars

for step12 = 1 to 12
3F19: set_car vehicle component "INLET" index step12 glow 0
3F19: set_car vehicle component "FreeTurb" index step12 glow 0
3F19: set_car vehicle component "MassFlow" index step12 glow 0
3F19: set_car vehicle component "EGT" index step12 glow 0
3F19: set_car vehicle component "FuelFlow" index step12 glow 0
3F19: set_car vehicle component "MainOil" index step12 glow 0
end

for step24 = 1 to 24
3F19: set_car vehicle component "Compressor" index step24 glow 0
3F19: set_car vehicle component "HYDSYS" index step24 glow 0
3F19: set_car vehicle component "VoltsDC" index step24 glow 0
3F19: set_car vehicle component "Capstats" index step24 glow 0
3F19: set_car vehicle component "Propag" index step24 glow 0
3F19: set_car vehicle component "Access" index step24 glow 0
3F19: set_car vehicle component "Approach" index step24 glow 0
3F19: set_car vehicle component "RadarWatt" index step24 glow 0
3F19: set_car vehicle component "SensorRange" index step24 glow 0
3F19: set_car vehicle component "FuelGal" index step24 glow 0
3F19: set_car vehicle component "MPG" index step24 glow 0
3F19: set_car vehicle component "RangeEst" index step24 glow 0
end
    wait 0  
return


:Engine_On
01B4: set_player $PLAYER_CHAR can_move 0
wait 1000

//random bars come on first

//Accessory Lights On
3F18: set_car vehicle component "AccessoryLights" glow 1
3F18: set_car vehicle component "PilotCenterLights" glow 1
3F18: set_car vehicle component "S1Voice" glow 1
wait 1000
3F18: set_car vehicle component "MinRPM" glow 1
3F18: set_car vehicle component "FuelOn" glow 1

wait 1000
3F18: set_car vehicle component "Power" glow 1
3F18: set_car vehicle component "MinRPM" glow 0
wait 1000
3F18: set_car vehicle component "Ignitors" glow 1
wait 1000
3F18: set_car vehicle component "MinRPM" glow 1
3F18: set_car vehicle component "FuelOn" glow 0
wait 1000
3F18: set_car vehicle component "FuelOn" glow 1
3F18: set_car vehicle component "Ignitors" glow 0
wait 1000
3F18: set_car vehicle component "Ignitors" glow 1
01B4: set_player $PLAYER_CHAR can_move 1
wait 0
return  












