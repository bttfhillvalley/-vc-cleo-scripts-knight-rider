{$CLEO .s}
{$INCLUDE Variables.txt}
{$INCLUDE ../Common/CleoConstants.txt}
0000:
const
KEY_Engine = 8 // backspace
end
int startup
int led
int MPH2
int TURNRAD
int RPM
int RPMDigit
int step12
int step24
int step49
int step10
int random12

0000:
while true 
    wait 10
    if
        not Player.Defined($PLAYER_CHAR)
    then
        continue
    end
    if
        80DD:   not actor $player_actor driving_vehicle_type 239
    then
        continue
    end
    03C1: vehicle = player $PLAYER_CHAR car
    gosub @Engine_Off
    gosub @Engine_On
3F02: Engine_IO = car vehicle engine_status 
end



:Engine_Off
wait 0
if
engine_io == 0
then
//!!!temporary section Start!!!!
//RPM dots
for RPM = 1 to 29
3F19: set_car vehicle component "RPM" index RPM glow 0
end
for RPMDigit = 10 to 29
3F11: set_car vehicle component "digitalRPMdigit" index RPMDigit visible 0
3F19: set_car vehicle component "digitalRPMdigit" index RPMDigit glow 0 
end
//display zeros
3F10: set_car vehicle component "digitalRPMdigit10" visible 1 
3F10: set_car vehicle component "digitalRPMdigit20" visible 1


3F10: set_car vehicle component "s3pedals" visible 0 //season 3 pedal set

//!!!temporary section End!!!!

//oxygen
3F16: rotate_car_part "oxygen" angle 0.0 0.0 0.0 car vehicle
3F16: rotate_car_part "oxygenled" angle 0.0 0.0 0.0 car vehicle
3F18: set_car vehicle component "oxygenled" glow 0  

//Auto Cruise Off
3F18: set_car vehicle component "AutoCruise" glow 0
3F18: set_car vehicle component "AutoCruiseBTN" glow 0


//Normal Cruise Off
3F18: set_car vehicle component "NormalCruise" glow 0
3F18: set_car vehicle component "NormalCruiseBTN" glow 0

//Pursuit Mode Off  
3F18: set_car vehicle component "Pursuit" glow 0
3F18: set_car vehicle component "PursuitBTN" glow 0

//Top Center Lights Off
3F18: set_car vehicle component "Power" glow 0
3F18: set_car vehicle component "MinRPM" glow 0
3F18: set_car vehicle component "FuelOn" glow 0
3F18: set_car vehicle component "Ignitors" glow 0
3F12: set car vehicle component "Power" alpha 50
3F12: set car vehicle component "MinRPM" alpha 50
3F12: set car vehicle component "FuelOn" alpha 50
3F12: set car vehicle component "Ignitors" alpha 50

//Middle Center Lights Off
3F18: set_car vehicle component "PilotCenterLights" glow 0
3F12: set car vehicle component "PilotCenterLights" alpha 50
3F18: set_car vehicle component "S1Voice" glow 0
3F12: set car vehicle component "S1Voice" alpha 50

//Accessory Lights Off
3F18: set_car vehicle component "AccessoryLights" glow 0
3F12: set car vehicle component "AccessoryLights" alpha 150

{3F12: set car vehicle component "screen1" alpha 0
3F12: set car vehicle component "screen2" alpha 0
3F18: set_car vehicle component "screen1" glow 0
3F18: set_car vehicle component "screen2" glow 0 }



//right led bars
0459: terminate_all_scripts_with_this_name 'RNDBAR'
0459: terminate_all_scripts_with_this_name 'RNDBAR1'
0459: terminate_all_scripts_with_this_name 'RNDBAR2'
0459: terminate_all_scripts_with_this_name 'RNDBAR3'
0459: terminate_all_scripts_with_this_name 'RNDBAR4'
0459: terminate_all_scripts_with_this_name 'RNDBAR5'
0459: terminate_all_scripts_with_this_name 'RNDBAR6'
0459: terminate_all_scripts_with_this_name 'RNDBAR7'
0459: terminate_all_scripts_with_this_name 'RNDBAR8'
0459: terminate_all_scripts_with_this_name 'RNDBAR9'
0459: terminate_all_scripts_with_this_name 'RNBAR10'
0459: terminate_all_scripts_with_this_name 'RNBAR11'
0459: terminate_all_scripts_with_this_name 'RNBAR12'
0459: terminate_all_scripts_with_this_name 'RNBAR13'
0459: terminate_all_scripts_with_this_name 'RNBAR14'
0459: terminate_all_scripts_with_this_name 'RNBAR15'
0459: terminate_all_scripts_with_this_name 'RNBAR16'
0459: terminate_all_scripts_with_this_name 'RNBAR17'
0459: terminate_all_scripts_with_this_name 'PURSUIT'
for step12 = 1 to 12
3F19: set_car vehicle component "INLET" index step12 glow 0
3F19: set_car vehicle component "FreeTurb" index step12 glow 0
3F19: set_car vehicle component "MassFlow" index step12 glow 0
3F19: set_car vehicle component "EGT" index step12 glow 0
3F19: set_car vehicle component "FuelFlow" index step12 glow 0
3F19: set_car vehicle component "MainOil" index step12 glow 0
end

for step24 = 1 to 24
3F19: set_car vehicle component "Compressor" index step24 glow 0
3F19: set_car vehicle component "HYDSYS" index step24 glow 0
3F19: set_car vehicle component "VoltsDC" index step24 glow 0
3F19: set_car vehicle component "Capstats" index step24 glow 0
3F19: set_car vehicle component "Propag" index step24 glow 0
3F19: set_car vehicle component "Access" index step24 glow 0
3F19: set_car vehicle component "Approach" index step24 glow 0
3F19: set_car vehicle component "RadarWatt" index step24 glow 0
3F19: set_car vehicle component "SensorRange" index step24 glow 0
3F19: set_car vehicle component "FuelGal" index step24 glow 0
3F19: set_car vehicle component "MPG" index step24 glow 0
3F19: set_car vehicle component "RangeEst" index step24 glow 0
end
//remove the screen
for step12 = 1 to 15
3F11: set_car vehicle component "screen1" index step12 visible 0
end

startup = 1
end
    wait 0  
return


:Engine_On 
wait 0   
if
startup == 1
then
if 
engine_io == 1
jf @Engine_Off
01B4: set_player $PLAYER_CHAR can_move 0
wait 200

//random bars come on first

for step12 = 1 to 12
3F19: set_car vehicle component "INLET" index step12 glow 1
3F19: set_car vehicle component "FreeTurb" index step12 glow 1
3F19: set_car vehicle component "MassFlow" index step12 glow 1
3F19: set_car vehicle component "EGT" index step12 glow 1
3F19: set_car vehicle component "FuelFlow" index step12 glow 1
3F19: set_car vehicle component "MainOil" index step12 glow 1
end

for step24 = 1 to 24
3F19: set_car vehicle component "Compressor" index step24 glow 1
3F19: set_car vehicle component "HYDSYS" index step24 glow 1
3F19: set_car vehicle component "VoltsDC" index step24 glow 1
3F19: set_car vehicle component "Capstats" index step24 glow 1
3F19: set_car vehicle component "Propag" index step24 glow 1
3F19: set_car vehicle component "Access" index step24 glow 1
3F19: set_car vehicle component "Approach" index step24 glow 1
3F19: set_car vehicle component "RadarWatt" index step24 glow 1
3F19: set_car vehicle component "SensorRange" index step24 glow 1
3F19: set_car vehicle component "FuelGal" index step24 glow 1
3F19: set_car vehicle component "MPG" index step24 glow 1
3F19: set_car vehicle component "RangeEst" index step24 glow 1
end
//Accessory Lights On
3F18: set_car vehicle component "AccessoryLights" glow 1
3F18: set_car vehicle component "PilotCenterLights" glow 1

stream_custom_script "kitt/screen1.s" vehicle















{for step24 = 0 to 255 step 15
3F12: set car vehicle component "screen1" alpha step24
3F12: set car vehicle component "screen2" alpha step24
wait 0
end 
3F18: set_car vehicle component "screen1" glow 1
3F18: set_car vehicle component "screen2" glow 1
                                                  }
//animate top center lights

wait 500
3F18: set_car vehicle component "MinRPM" glow 1
3F18: set_car vehicle component "FuelOn" glow 1
wait 500
3F18: set_car vehicle component "Power" glow 1
3F18: set_car vehicle component "MinRPM" glow 0
wait 500
3F18: set_car vehicle component "Ignitors" glow 1
wait 500
3F18: set_car vehicle component "MinRPM" glow 1
3F18: set_car vehicle component "FuelOn" glow 0
wait 500
3F18: set_car vehicle component "FuelOn" glow 1
3F18: set_car vehicle component "Ignitors" glow 0
wait 500
3F18: set_car vehicle component "Ignitors" glow 1
for step12 = 1 to 12
3F19: set_car vehicle component "INLET" index step12 glow 0
3F19: set_car vehicle component "FreeTurb" index step12 glow 0
3F19: set_car vehicle component "MassFlow" index step12 glow 0
3F19: set_car vehicle component "EGT" index step12 glow 0
3F19: set_car vehicle component "FuelFlow" index step12 glow 0
3F19: set_car vehicle component "MainOil" index step12 glow 0
end

for step24 = 1 to 24
3F19: set_car vehicle component "Compressor" index step24 glow 0
3F19: set_car vehicle component "HYDSYS" index step24 glow 0
3F19: set_car vehicle component "VoltsDC" index step24 glow 0
3F19: set_car vehicle component "Capstats" index step24 glow 0
3F19: set_car vehicle component "Propag" index step24 glow 0
3F19: set_car vehicle component "Access" index step24 glow 0
3F19: set_car vehicle component "Approach" index step24 glow 0
3F19: set_car vehicle component "RadarWatt" index step24 glow 0
3F19: set_car vehicle component "SensorRange" index step24 glow 0
3F19: set_car vehicle component "FuelGal" index step24 glow 0
3F19: set_car vehicle component "MPG" index step24 glow 0
3F19: set_car vehicle component "RangeEst" index step24 glow 0
end
stream_custom_script "kitt/RandomLEDBars/RandomLEDBar1.s" vehicle
stream_custom_script "kitt/RandomLEDBars/RandomLEDBar2.s" vehicle
stream_custom_script "kitt/RandomLEDBars/RandomLEDBar3.s" vehicle
stream_custom_script "kitt/RandomLEDBars/RandomLEDBar4.s" vehicle
stream_custom_script "kitt/RandomLEDBars/RandomLEDBar5.s" vehicle
stream_custom_script "kitt/RandomLEDBars/RandomLEDBar6.s" vehicle
stream_custom_script "kitt/RandomLEDBars/RandomLEDBar7.s" vehicle
stream_custom_script "kitt/RandomLEDBars/RandomLEDBar8.s" vehicle
stream_custom_script "kitt/RandomLEDBars/RandomLEDBar9.s" vehicle
stream_custom_script "kitt/RandomLEDBars/RandomLEDBar10.s" vehicle
stream_custom_script "kitt/RandomLEDBars/RandomLEDBar11.s" vehicle
stream_custom_script "kitt/RandomLEDBars/RandomLEDBar12.s" vehicle
stream_custom_script "kitt/RandomLEDBars/RandomLEDBar13.s" vehicle
stream_custom_script "kitt/RandomLEDBars/RandomLEDBar14.s" vehicle
stream_custom_script "kitt/RandomLEDBars/RandomLEDBar15.s" vehicle
stream_custom_script "kitt/RandomLEDBars/RandomLEDBar16.s" vehicle
stream_custom_script "kitt/RandomLEDBars/RandomLEDBar17.s" vehicle
stream_custom_script "kitt/RandomLEDBars/RandomLEDBar18.s" vehicle
stream_custom_script "kitt/pursuit.s" vehicle 
01B4: set_player $PLAYER_CHAR can_move 1
//voicebox
3F18: set_car vehicle component "S1Voice" glow 1

//cruise
3F18: set_car vehicle component "AutoCruise" glow 0
3F18: set_car vehicle component "AutoCruiseBTN" glow 0
3F18: set_car vehicle component "NormalCruise" glow 1
3F18: set_car vehicle component "NormalCruiseBTN" glow 1 
3F18: set_car vehicle component "Pursuit" glow 0
3F18: set_car vehicle component "PursuitBTN" glow 0	
wait 0
startup = 0
end      
return  










